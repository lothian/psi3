#
# CINTS Makefile
#
# Edward Valeev, Fake-New-Millenium-Eve
#
# Edit this list of subdirectories whose content
# to be included in CINTS to suit your needs
#
# Don't forget to adjust the list of the libraries (CLIBS) too!!!
#
# P.S. You must add MP2R12 to the list in order to add R12_Ints
#
SUBDIRS = Default_Ints HF_Fock Default_Deriv1 MP2

#
# These preprocessor defines will tell main.c and parsing.c what 
#  sections of code to include
#
OPTIONS = $(SUBDIRS:%=-DINCLUDE_%)
#
# Tools will always be included
#
DIRS = Tools $(SUBDIRS)

srcdir = @srcdir@
VPATH = @srcdir@
VPATH += $(DIRS:%=$(srcdir)/%)

include ../MakeVars

#Need do remove -DAIX because I have a variable named AIX
CDEF_NOAIX = $(CDEF:-DAIX=)
CFLAGS = $(CDBG) $(COPT) $(CDEF_NOAIX) $(COTH) $(CINC)

CINC = -I$(srcdir) $(DIRS:%=-I$(srcdir)/%)  -I$(objincdir) -I$(incdir)
CDEF += $(OPTIONS)

LD = $(FC)
LDLIBS += $(BLAS)
ALLOC = 
PSILIBS = -lfile30 -lderiv -lint -lqt -liwl \
          -lpsio -lciomr -lipv1 -lmalloc

CSRC = main.c parsing.c gprgid.c init_globals.c $(DIRS:%=%/*.c)
TRUESRC = $(notdir $(shell echo `ls $(CSRC:%=$(srcdir)/%)`))

BINOBJ = $(TRUESRC:%.c=%.o)

include ../MakeRules

install:: install_html

install_man:: cints.1
	$(MKDIRS) $(mandir)/man1
	$(INSTALL_INCLUDE) $^ $(mandir)/man1

install_html:: install_index install_htmlsrc

install_index:: cints.html
	$(MKDIRS) $(htmldir)
	$(INSTALL_INCLUDE) $^ $(htmldir)

HTMLSRC = $(shell echo `ls $(srcdir)/Documentation/*.html`)
install_htmlsrc: $(HTMLSRC)
	$(MKDIRS) $(htmldir)/CINTS
	$(INSTALL_INCLUDE) $(HTMLSRC) $(htmldir)/CINTS
