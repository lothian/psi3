%
% The PSI Installation Manual
%

\documentclass[12pt]{article}
\usepackage{html}
\setlength{\textheight}{9in}
\setlength{\textwidth}{6.5in}
\setlength{\hoffset}{0in}
\setlength{\voffset}{0in}
\setlength{\headheight}{0in}
\setlength{\headsep}{0in}
\setlength{\topmargin}{0in}
\setlength{\oddsidemargin}{-0.05in}
\setlength{\evensidemargin}{-0.05in}
\setlength{\marginparsep}{0in}
\setlength{\marginparwidth}{0in}
\setlength{\parsep}{0.8ex}
\setlength{\parskip}{1ex plus \fill}
\baselineskip 18pt
\renewcommand{\topfraction}{.8}
\renewcommand{\bottomfraction}{.2}

\begin{document}
\include{macros}

\begin{center}
\ \\
\vspace{2.0in}
{\bf {\Large Installation Manual for the \PSIthree\ Program Package}} \\
\vspace{0.5in}
T.\ Daniel Crawford,$^a$ C.\ David Sherrill,$^b$ and Edward F.\ Valeev$^b$ \\
\ \\
{\em $^a$Department of Chemistry, Virginia Tech, Blacksburg, Virginia 24061-0001} \\
\vspace{0.1in}
{\em $^b$Center for Computational Molecular Science and Technology, \mbox{Georgia 
Institute of Technology,} Atlanta, Georgia 30332-0400} 
\ \\
\vspace{0.3in}
Version of: \today
\end{center}

\thispagestyle{empty}

\newpage
\section{Compilation Prerequisites}

The following external software packages are needed to complile \PSIthree:
\begin{itemize}
\item A well-optimized basic linear algebra subroutine (BLAS) library
  for vital matrix-matrix and matrix-vector multiplication routines.
  We recommend the excellent ATLAS package developed at the University
  of Tennessee.  \htmladdnormallink{{\tt
  math-atlas.sourceforge.net}}{http://math-atlas.sourceforge.net}
\item The linear algebra package (LAPACK), also available from
  netlib.org.  \PSIthree\ makes use of LAPACK's eigenvalue/eigenvector
  and matrix inversion routines.  \htmladdnormallink{{\tt
  www.netlib.org/netlib}}{http://www.netlib.org/netlib}
\item Various GNU utilies: \htmladdnormallink{{\tt
www.gnu.org}}{http://www.gnu.org}
\begin{itemize}
\item {\tt autoconf}
\item {\tt make}
\item {\tt flex}
\item {\tt bison}
\item {\tt fileutils} (esp.\ {\tt install})
\end{itemize}
\item For documentation:
\begin{itemize}
\item {\tt LaTeX}
\item {\tt LaTeX2html} (v0.99.1 or 1.62, including the patch supplied in
psi3/misc)
\end{itemize}
\end{itemize}

\section{Basic Configuration and Installation}

A good directory for the PSI3 source code is /usr/local/src/psi3.
The directory should {\em not} be named {\tt /usr/local/psi}, as that is
the default installation directory unless changed by the {\tt --prefix}
directive (see below).  It should also not have any periods in the path,
e.g., {\tt /usr/local/psi3.2}, because of a bug in {\tt dvips} which will
cause the compilation of documentation to fail.

The following series of steps will configure and build the \PSIthree\
package and install the executables in /usr/local/psi/bin:

\begin{enumerate}
\item {\tt cd \$PSI3} (your top-level \PSIthree\ source directory)
\item {\tt autoconf}
\item {\tt mkdir objdir}
\item {\tt cd objdir}
\item {\tt ../configure}
\item {\tt make}
\item {\tt make install}
\end{enumerate}

\noindent
You may need to make use of one or more of the following options to
the {\tt configure} script:
\begin{itemize}
\item {\tt --prefix=directory} --- Use this option if you wish to
  install the \PSIthree\ package somewhere other than the default
  directory, {\tt /usr/local/psi}.
\item {\tt --with-cc=compiler} --- Use this option to specify a C
  compiler.  The default search order for compilers is: {\tt gcc},
  {\tt cc}, {\tt ccc}.  (NB: On AIX systems, the search order is {\tt
  cc\_r}, {\tt cc}, {\tt gcc}, {\tt xlc}. When compiling in 64-bit
  mode on AIX, you must manually specify {\tt cc\_r} as the C compiler
  of choice.)
\item {\tt --with-cxx=compiler} --- Use this option to specify a C++
  compiler.  The default search order for compilers is: {\tt g++},
  {\tt c++}, {\tt cxx}.  (NB: On AIX systems, the search order is {\tt
  xlC\_r}, {\tt xlC}, {\tt c++}, {\tt g++}.)
\item {\tt --with-fc=compiler} --- Use this option to specify a
  Fortran-77 compiler.  The default search order for compilers is:
  {\tt g77}, {\tt f77}, {\tt fc}, {\tt f2c}.  (NB: On AIX systems, the
  search order is {\tt xlf\_r}, {\tt xlf}, {\tt g77}, {\tt f77}, {\tt
  fc}, {\tt f2c}.)
\item {\tt --with-ar=compiler} --- Use this option to specify an
  archiver.  The default is {\tt ar}.
\item {\tt --with-blas=library} --- Use this option to specify a BLAS
  library.  If your BLAS library has multiple components, enclose the
  file list with single right-quotes, e.g., {\tt
  --with-blas='-lf77blas -latlas'}.
\item {\tt --with-lapack=library} --- Use this option to specify a
  LAPACK library.  If your LAPACK library has multiple components,
  enclose the file list with single right-quotes, e.g., {\tt
  --with-lapack='-llapack -lcblas -latlas'}.
\item {\tt --with-max-am-eri=integer} --- Specifies the maximum
  angular momentum level for the primitive Gaussian basis functions
  when computing electron repulsion integrals.  This is set to
  $g$-type functions (AM=5) by default.
\item {\tt --with-max-am-deriv1=integer} --- Specifies the maximum
  angular momentum level for first derivatives of the primitive
  Gaussian basis functions.  This is set to $f$-type functions (AM=4)
  by default.
\item {\tt --with-max-am-deriv2=integer} --- Specifies the maximum
  angular momentum level for second derivatives of the primitive
  Gaussian basis functions.  This is set to $d$-type functions (AM=3)
  by default.
\item {\tt --with-max-am-r12=integer} --- Specifies the maximum
  angular momentum level for primitive Gaussian basis functions used
  in $r_{12}$ explicitly correlated methods.  This is set to $f$-type
  functions (AM=4) by default.
\item {\tt --with-debug=option} --- This option turns on debugging
  options.  If the argument is omitted, ``{\tt -g}'' will be used by default.
\item {\tt --with-opt=options} --- This option may be used to select
  special optimization flags, overriding defaults.
\item {\tt --with-parallel=sgi} --- This option turns on automatic
  parallelization available with some SGI systems.  Since none of the
  primary developers of \PSIthree\ actually {\em uses} SGI systems at
  present, it seems likely that this option will not work.
\end{itemize}

\section{Detailed Installation Instructions}

This section provides detailed instructions for compiling and
installing the \PSIthree\ package.  

\subsection{Step 1: Configuration}

First, we recommend that you choose for the top-level {\tt \$PSI3} source
directory something other than {\tt /usr/local/psi}; your {\tt \$HOME}
directory or {\tt /usr/local/src/psi3} are convenient choices.  Next,
in the top-level {\tt \$PSI3} source directory you've chosen, first run
{\tt autoconf} to generate the configure script from {\tt configure.in}.
It is best to keep the source code separate from the compilation area,
so you must choose a subdirectory for compilation of the codes.  A simple
option is {\tt \$PSI3/objdir}, which should work for most environments.
However, if you need executables for several architectures, choose more
meaningful subdirectory names.

$\bullet$ The compilation directory will be referred to as {\tt \$objdir}
for the remainder of these instructions.

In {\tt \$objdir}, run the configure script found in the {\tt \$PSI3}
top-level source directory.  This script will scan your system to locate
certain libraries, header files, etc. needed for complete compilation.
The script accepts a number of options, all of which are listed above.
The most important of these is the {\tt --prefix} option, which selects the
installation directory for the executables, the libraries, header files,
basis set data, and other administrative files.  The default {\tt --prefix}
is {\tt /usr/local/psi}.

$\bullet$ The configure script's {\tt --prefix} directory will be referred
to as {\tt \$prefix} for the remainder of these instructions.

\subsection{Step 2: Compilation}

Running {\tt make} (which must be GNU's {\tt 'make'} utility) in {\tt
\$objdir} will compile the \PSIthree\ libraries, followed by the executable
modules, and finally documentation (if LaTeX is available).

\subsection{Step 3: Installation}

Once testing is complete, installation into \$prefix is accomplished by
running {\tt make install} in {\tt \$objdir}.   Executable modules are
installed in {\tt \$prefix/bin}, libraries in {\tt \$prefix/lib}, basis set
data and other control strctures {\tt \$prefix/share}, and documentation
in {\tt \$prefix/doc}.

\subsection{Step 4: Testing}

An ever-growing number of test cases is available in {\tt \$PSI3/tests}.
A simple automated system is now available to execute all the current test
cases and compare to the available reference data. Here are a few 
examples for running the automated test cases.

\noindent
If you want to run all the test cases then type:
\begin{verbatim}
./driver.test.pl
\end{verbatim}
\noindent
There are several categories for test cases that allow you to customize
which test cases you want to run.  For example:
\begin{verbatim}
./driver.test.pl --ci        Runs all detci calcs
./driver.test.pl --cc        Runs all coupled-cluster calcs
./driver.test.pl --scf       Runs all hartree-fock calcs
./driver.test.pl --sp        Runs all single-point calcs
./driver.test.pl --geom      Runs all geometry optimization calcs
./driver.test.pl --freq      Runs all harmonic vibrational frequency calcs
./driver.test.pl --excite    Runs all excited state calcs
./driver.test.pl --small     Runs all low memory, short run time calcs
./driver.test.pl --medium    Runs all low memory, med run time calcs
./driver.test.pl --large     Runs all high memory, long run time calcs
./driver.test.pl --standard  Runs all small and medium calcs
\end{verbatim} 
\noindent
There are also two different arguments that are used to clean-up 
each directory just in case the test cases need to be run more than once.
For example:
\begin{verbatim}
./driver.test.pl [category] --clean     Removes all extra PSI files
                                        except file*.dat and output.dat

./driver.test.pl [category] --cleanall  Removes all extra PSI files
\end{verbatim}
\noindent
The \PSIthree\ User's Manual provides detailed instructions for running 
calculations. Report bugs to {\tt psimaster@sirius.chem.vt.edu}.

\subsection{Step 5: Cleaning}

All object files and libraries can be removed to save disk space by running
{\tt make clean} in {\tt \$objdir}.

\subsection{Step 6: User Configuration}

After the PSI3 package has been successfullly installed, the user will
need to add the installation directory into their path.  If the package
has been installed in the default location {\tt /usr/local/psi3}, then
in C shell, the user should add something like the following to 
their {\tt .cshrc} file:
\begin{verbatim}
setenv PSI /usr/local/psi3
set path = ($path $PSI/bin)
setenv MANPATH $PSI/doc/man:$MANPATH
\end{verbatim}
The final line will enable the use of the PSI3 man pages.
\begin{verbatim}
\end{verbatim}


\end{document}
