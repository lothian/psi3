
srcdir = @srcdir@

include ../MakeVars

#currdir = $(top_objdir)/src/doc/manual
VPATH = $(srcdir):$(currdir)/userman:$(currdir)/progman

USERMAN = userman
PROGMAN = progman
USERMANDVI = $(shell test -n $(LATEX) && echo "$(USERMAN).dvi")
PROGMANDVI = $(shell test -n $(LATEX) && echo "$(PROGMAN).dvi")
USERMANPS = $(shell test -n $(DVIPS) && echo "$(USERMAN).ps")
PROGMANPS = $(shell test -n $(DVIPS) && echo "$(PROGMAN).ps")
USERMANHTML = $(shell test -n $(LATEX2HTML) && echo "$(USERMAN).html")
PROGMANHTML = $(shell test -n $(LATEX2HTML) && echo "$(PROGMAN).html")
TARGET = $(USERMANDVI) $(PROGMANDVI) $(USERMANPS) $(PROGMANPS) $(USERMANHTML) $(PROGMANHTML)
LOCALTEXINPUTS =

COMMONSRC = \
macros.tex \
reference.tex \
history.tex \
install.tex

USERMANSRC = userman.tex
USERMANSRCS = \
User/appendix.tex \
User/modules.tex \
User/tutorial.tex \
User/bibliography.bib \
User/preliminary.tex \
User/introduction.tex \
User/running.tex

PROGMANSRC = progman.tex
PROGMANSRCS = \
Prog/c_program.tex \
Prog/fortran.tex \
Prog/ip.tex \
Prog/cvs.tex \
Prog/fundamental_psi.tex \
Prog/makefiles.tex \
Prog/debugging.tex \
Prog/introduction.tex \
Prog/other_libs.tex \
Prog/documentation.tex \
Prog/io.tex \
Prog/style.tex \
Prog/files.tex \
Prog/io_new.tex \
Prog/checkpointfile.tex \
Prog/iwl.tex \
Prog/qt.tex

include ../MakeRules

#
# To be certain that we get all references right we need to run LaTeX 3 times
#
$(USERMANDVI) : $(USERMANSRC) $(USERMANSRCS) $(COMMONSRC)
	TEXINPUTS=$(LOCALTEXINPUTS):$(srcdir):; export TEXINPUTS;\
$(LATEX) $(USERMANSRC);\
$(LATEX) $(USERMANSRC); $(LATEX) $(USERMANSRC);

$(PROGMANDVI) : $(PROGMANSRC) $(PROGMANSRCS) $(COMMONSRC)
	TEXINPUTS=$(LOCALTEXINPUTS):$(srcdir):; export TEXINPUTS;\
$(LATEX) $(PROGMANSRC);\
$(LATEX) $(PROGMANSRC); $(LATEX) $(PROGMANSRC);



