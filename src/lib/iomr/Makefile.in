
srcdir = @srcdir@
VPATH = @srcdir@

include ../MakeVars

TARGET = $(top_objdir)/lib/libPSI_iomr.a

FSRC = \
 zero.F izero.F \
 srew.F digit.F dott.F ffile.F flin.F frqout.F intowp.F ioerr.F \
 locate.F  matinv.F matout.F print.F rsp.F tstart.F \
 tql2.F tqlrat.F trbak3.F tred3.F

CSRC = tstartc.c

LIBOBJ = $(FSRC:%.F=%.o) $(CSRC:%.c=%.o)

include ../MakeRules

# These routines can be called by different threads at the same time
# so local data must be on the stack.
zero.$(OBJSUF): zero.$(F77SUF)
	$(FC) $(FFLAGS_NOSTATIC) -c $< $(OUTPUT_OPTION)
bit.$(OBJSUF): bit.$(F77SUF)
	$(FC) $(FFLAGS_NOSTATIC) -c $< $(OUTPUT_OPTION)

ifneq (,$(findstring linux,$(target)))
givens.o: givens.f
	$(FC) $(FDBG) $(FDEF) $(FOTH) $(FINC) -c $< $(OUTPUT_OPTION)
endif

ifneq ($(DODEPEND),no)
include $(CSRC:%.c=%.d)
endif
